os:
  - linux

language: c

cache:
  directories:
    - "$HOME/.nimble"
    - "$HOME/.choosenim"

install:
  - |
    export CHOOSENIM_CHOOSE_VERSION="stable"
    export CHOOSENIM_NO_ANALYTICS=1
    curl "https://nim-lang.org/choosenim/init.sh" -sSf > init.sh
    sh init.sh -y
  - export PATH="$HOME/.nimble/bin:$PATH"

script:
  - nimble install -y
  - nimble test -y